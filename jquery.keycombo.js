// Generated by CoffeeScript 1.4.0
/*
Decription: key combo to listen for keypressed sequences
By: Billy Huang
Usage:
$(window).keyCombo('next', function{
    // do something here when 'next' is pressed in sequence
});

// to use object listeral
// !!! this only listens in the window scope
scaner('window', {
    'Next': function(){
        // do something when next is scanned
    }
    , 'prev': function(){
    
    }
})
*/

jQuery.fn.keyCombo = function(sequence, callback) {
  return this.each(function() {
    var i;
    i = 0;
    return $(this).keypress(function(e) {
      var key;
      key = String.fromCharCode(e.which);
      if (sequence[i] === key) {
        ++i;
        if (sequence.length === i) {
          i = 0;
          callback();
          return $('body').trigger('keyCombo:end');
        }
      } else {
        return i = 0;
      }
    });
  });
};

window.scaner = function(scope, args) {
  var key, _results;
  var scope = eval(scope);
  _results = [];
  for (key in args) {
    _results.push($(scope).keyCombo(key, args[key]));
  }
  return _results;
};
